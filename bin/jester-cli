#!/usr/bin/python

import socket
import re

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(('localhost', 8888))

input = ""
c = re.compile('source (.*)')

def send_and_print(input):
    s.send(input + "\n")
    result = s.recv(4096)
    print result

while True:
    input = raw_input("> ")
    if input == 'quit':
        break

    results = c.findall(input)    

    if results:
        print "Loading from " + results[0]
        with open(results[0]) as f:
            for line in f:
                send_and_print(line)
    else:
        send_and_print(input)
        





